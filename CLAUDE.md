# ゲーム内容
Web上で実行できるテトリスを作成する。
・美しいUI
・1画面に収まる
・言語選択(日本語、英語)

# プロジェクト概要

このプロジェクトは、モダンなWebテクノロジーを使用したテトリスゲームです。React 19とTypeScriptで構築され、美しいUI、多言語対応（日本語・英語）、レスポンシブデザインを特徴としています。

## 主な機能
- 完全なテトリスゲーム体験（移動、回転、ライン消去、スコアリング）
- リアルタイムゲームループ
- キーボード操作（矢印キー、スペース、P）
- 次のピース表示
- レベルアップシステム
- ゲーム一時停止・再開機能
- 言語切り替え（日本語/英語）

## アーキテクチャパターン

### 状態管理
- **Zustand**: 軽量でシンプルな状態管理ライブラリを使用
- 単一のゲームストア（gameStore.ts）でゲーム状態を集中管理
- イミュータブルな状態更新パターン

### コンポーネント設計
- **関数型コンポーネント**: React Hooksを活用したモダンなコンポーネント設計
- **コンポーネント分離**: UI要素を独立したコンポーネントに分割
  - Game.tsx: メインゲームコンテナ
  - Board.tsx: ゲームボード表示
  - ScoreBoard.tsx: スコア・レベル表示
  - Controls.tsx: 操作説明
  - NextPiece.tsx: 次のピース表示
  - GameOverlay.tsx: ゲームオーバー・一時停止画面

### ゲームロジック
- **純粋関数**: サイドエフェクトのないゲームロジック
- **テスト駆動開発**: ゲームロジックに包括的なテスト
- **分離された関心事**: ゲームロジック（game/）とUI（components/）の分離

### カスタムHooks
- **useGameLoop**: ゲームの自動進行を管理
- **useKeyboardControls**: キーボード入力の処理

## メインエントリーポイント

メインエントリーポイントは以下の通りです：
- **index.html**: HTMLエントリーポイント
- **src/main.tsx**: Reactアプリケーションの起点
- **src/App.tsx**: アプリケーションのルートコンポーネント
- **src/components/Game.tsx**: ゲームのメインコンポーネント

## フォルダ構造

```
src/
├── components/          # UIコンポーネント
├── game/               # ゲームロジック（純粋関数）
├── hooks/              # カスタムHooks
├── i18n/               # 国際化設定
├── locales/            # 言語ファイル
├── store/              # 状態管理（Zustand）
├── test/               # テスト設定
├── types/              # TypeScript型定義
└── utils/              # ユーティリティ関数
```

## データモデル

### 主要な型定義（types/game.ts）
- **GameState**: ゲーム全体の状態（ボード、現在のピース、スコアなど）
- **Tetromino**: テトリスピースの定義（型、位置、回転、形状）
- **Position**: X、Y座標
- **TetrominoType**: 7種類のテトリスピース（I、O、T、S、Z、J、L）

### ゲーム状態
- board: 20×10のゲームボード
- currentPiece: 現在落下中のピース
- nextPiece: 次に出現するピース
- score/lines/level: ゲーム進行状況
- isGameOver/isPaused: ゲーム状態フラグ

## エラーハンドリング

- **TypeScript**: 型安全性による実行時エラーの予防
- **条件チェック**: ゲーム状態の検証（ゲームオーバー、一時停止時の操作無効化）
- **バリデーション**: ピース配置の有効性チェック
- **Graceful Degradation**: 不正な状態でもアプリケーションクラッシュを回避

## 認証

このゲームはクライアントサイドのみで動作するため、認証機能は実装されていません。将来的にハイスコア保存などの機能を追加する際に検討される可能性があります。

## データベース

現在、データベースは使用されていません。ゲーム状態はメモリ内のみで管理され、ページリロード時にリセットされます。

# ゲームアーキテクチャ

# 開発方針
- シンプル
  できるだけモダンな機能を利用し、シンプルでメンテナンスしやすく
- テストファースト
- 下記以外のフレームワーク・ツールが必要になった場合は、確認すること‼️

# 利用フレームワーク・ツール

## フロントエンドフレームワーク
React: 19.1.0
@types/react: 19.1.8
@types/react-dom 19.1.6

## ビルドツール・開発環境
- Vite: 6.3.5
- TypeScript: 5.8.3 (ES2024ターゲット)
- Node.js: 24.2
- pnpm: 10.12.1

## スタイリング・UI
- Tailwind CSS: 4.1.10
- shadcn/ui 2.7.0

# 状態管理・データ処理
- Zustand: 5.0.5 (状態管理)

# TypeScriptのためのスキーマ宣言とデータ検証のためのライブラリ
- Zod 4

# 国際化
- i18next: 25.2.1

# コード品質・リンティング
- Biome: 2.0.2 (リンティング・フォーマッティングに利用)
- Lefthook: 1.11.14 (Gitフック管理)

# テスト
- Vitest: 3.2.4 (テストフレームワーク)

# 最適化・バンドル
- knip: 5.61.2 (デッドコード検出)

# ソース管理
- git 2.50
- gh 2.74.2

# デプロイメントターゲット
- Vercel

# CI/CDワークフロー
- GitHub Actions

